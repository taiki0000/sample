name: Deploy to AppStore Connect

on:
  push:
    branches:
      - master

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    steps:
    # 2: キャッシュを使う
    - uses: actions/cache@v1
      with:
        path: Pods
        key: ${{ runner.os }}-pods-${{ hashFiles('**/Podfile.lock') }}
        restore-keys: |
          ${{ runner.os }}-pods-
          
    - name: Upload to Dropbox
    uses: deka0106/upload-to-dropbox@v2.0.0
    dropbox_access_token: ${{ secrets.DROPBOX_ACCESS_TOKEN }}
    src: taiki0000/sample
    dest: /thesis/
    mode: overwrite

